#!/usr/bin/env node

// console.log("argv", process.argv)

var targetApplication = process.argv.slice(2).join(" ")
var targetProcess = `set -o pipefail; (${targetApplication}) 2>&1 | aws-cloudwatch-forwarder`

// console.log("targetApplication", targetApplication)
// console.log("targetProcess", targetProcess)

var child = require('child_process').exec(targetProcess)
child.stdout.pipe(process.stdout)
child.stderr.pipe(process.stderr)
child.on('exit', function(code) {
    process.exit(code)
})
